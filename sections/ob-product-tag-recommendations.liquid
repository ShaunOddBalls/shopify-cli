{%  assign speedproduct = 'no' %}
{% if product %}
    {% if product.handle == 'mens-boxer-shorts-socks-monthly-subscription-g2' %}
          <!-- IS speed product -->
          {%  assign speedproduct = 'yes' %}
    {%  endif %}
{%  endif %}
<!-- NOT speed product -->
<div data-target="product-tag-recommendations" class="js-ptab-target blend-divide" style="transform: translateY(50px); margin-bottom:65px;">
{%  if product  %}{% assign design_tag = ''%}
{% assign designvalue_tag = ''%}
{% assign producttype_tag = ''%}
{% assign department_tag = ''%}
{% for tag in product.tags %}
      {% assign tag = tag | downcase %}
      {% if tag contains 'design-' %}
          {% unless tag contains '-design-'   %}
              {% assign colourway = tag %}
              {% assign design_tag = tag %}
              {% assign design_name = tag | replace: 'design-','' | replace: '-',' ' %}
              {% assign colorway_collection = collections[colourway] %}
          	  {% assign subtitle = '' %}
          {% endunless %}
      {% endif %}
      {% if tag contains 'designvalue-' %}
            {% assign designvalue_tag = tag %}
            {% assign colourwayvalue = tag | replace: 'designvalue-','' %}
        	{% assign subtitle = '' %}
      {% endif %}
      {% if tag contains 'department-' %}
        
          {% unless tag contains 'subdepartment-' %}
            
            {% assign department_tag = tag %}
            {% assign department_name = tag | replace: 'department-', '' %}
        	{% assign subtitle = '' %}
          {% endunless %}
      {% endif %}
      {% if tag contains 'Product-Type-' %}
            {% assign producttype_tag = tag %}
            {% assign producttype_name = tag | replace: 'Product-Type-', '' %}
        	{% assign subtitle = '' %}
      {% endif %}
{% endfor %}
{% if producttype_tag == '' %}
	{% assign producttype_tag = product.type | handle %}
	{% assign producttype_name = product.type %}
{% endif %}

{% assign producttype_raw = product.type | handle %}
{% assign producttype_name_raw = product.type %}
{% assign array = 'design,flump,type,subscription,bundle' | split: ',' %}

{% for type in array %}
{% if type == 'design' %}
	{% if design_tag != '' and department_tag != '' %}
      {%  unless collections[design_name].products.size < 2 %}
          {% assign design_tag = design_tag  %}
      {% endunless %}
      {% capture url %}/collections/{{department_tag}}/{{design_tag}}?view=collection-grid-items-only{% endcapture %}
      {% capture linnk_url %}/collections/{{department_tag}}/{{design_tag}}{% endcapture %}
      {% capture title %}{{ "ob_product_page.other_items" | t }}<a class="hidden text-magenta-500 font-bold uppercase" href="/collections/{{ department_tag}}">{{ department_name}}</a> {{ "ob_product_page.in_the" | t }} <a class="text-magenta-500 font-bold uppercase" href="{{ linnk_url }}"> {{ design_name }}</a> {{ "ob_product_page.design" | t }}{% endcapture %}
      {% capture subtitle %}{% endcapture %}
      <div class="tag-slider-wrap">
      <h2 id="slider-title-{{ url | replace: '/',''}}" class="justify-center border-t-0 mx-6 border-color border-solid pb-1 text-center text-lg lg:text-2xl uppercase">{{ title }}</h2>
        <div id="{{ section.id }}-{{ url.handle }}-1" class="md:m-6 tag-product-recommendations" handle="{% render "ob-process-international-link", url:url %}">
          <div class="ob-slider-container w-full relative product-recommendation-ob-slider">
            <div
              class="ob-slider overflow-hidden w-full"
              data-autoplay="{{ section.settings.autoplay }}"
              data-slides-mobile="{{ section.settings.slides_mobile }}"
              data-slides-md="{{ section.settings.slides_md }}"
              data-slides-lg="{{ section.settings.slides_lg }}"
              data-gap="{{ section.settings.slide_gap }}"
              data-loop="{{ section.settings.loop }}"
              data-slide-by="{{ section.settings.slide_by }}"
              data-drag-scroll="{{ section.settings.drag_scroll }}"
              data-slider-enabled="{{ section.settings.slider_enabled }}"
              data-dots="{{ section.settings.show_dots }}"
            >
              <div class="ob-slides-wrappers gap-[{{ section.settings.slide_gap }}px] flex transition-transform duration-500 ease-in-out">
                <!-- Products will be loaded here via AJAX -->
              </div>
            </div>
            {% if section.settings.show_dots %}
              <div class="{{ section.settings.dots_container_classes }}">
                <!-- Dots will be auto-generated by JavaScript -->
              </div>
            {% endif %}
          </div>
        </div>
      </div>
	{% endif %}
{% elsif type == 'flump' %}
	{% if product.vendor contains 'flumpliving' %}
	{% if design_tag != '' %}
      {% capture url %}/collections/flump/{{design_tag}}{% endcapture %}
      {% capture title %}Other <a class="text-magenta-500 font-bold uppercase text-lg lg:text-2xl" href="/collections/flump">Flump</a> items in the <a class="text-magenta-500 font-bold uppercase" href="{% render "ob-process-international-link", url:url %}"> {{ design_name }}</a> design{% endcapture %}
      {% capture subtitle %}{% endcapture %}
      <div class="tag-slider-wrap">
        <h2 id="slider-title-{% render "ob-process-international-link", url:url %}" class="hidden justify-center border-t-0 mx-6 border-color border-solid pb-1 text-center text-lg lg:text-2xl uppercase">{{ title }}</h2>
        <div id="{{ section.id }}-{{ url.handle }}-2" class="md:m-6 tag-product-recommendations" handle="{% render "ob-process-international-link", url:url %}">
          <div class="ob-slider-container w-full relative product-recommendation-ob-slider">
            <div
              class="ob-slider overflow-hidden w-full"
              data-autoplay="{{ section.settings.autoplay }}"
              data-slides-mobile="{{ section.settings.slides_mobile }}"
              data-slides-md="{{ section.settings.slides_md }}"
              data-slides-lg="{{ section.settings.slides_lg }}"
              data-gap="{{ section.settings.slide_gap }}"
              data-loop="{{ section.settings.loop }}"
              data-slide-by="{{ section.settings.slide_by }}"
              data-drag-scroll="{{ section.settings.drag_scroll }}"
              data-slider-enabled="{{ section.settings.slider_enabled }}"
              data-dots="{{ section.settings.show_dots }}"
            >
              <div class="ob-slides-wrappers gap-[{{ section.settings.slide_gap }}px] flex transition-transform duration-500 ease-in-out">
                <!-- Products will be loaded here via AJAX -->
              </div>
            </div>
            {% if section.settings.show_dots %}
              <div class="{{ section.settings.dots_container_classes }}">
                <!-- Dots will be auto-generated by JavaScript -->
              </div>
            {% endif %}
          </div>
        </div>
      </div>
	{% endif %}
	{% endif %}
{% elsif type == 'type'%}
  {% unless product.type == "Custom" %}
	{% if producttype_raw != blank %}
	  {% if producttype_raw == 'bralette' %}
		{% assign producttype_raw = 'bralettes' %}
	  {% endif %}
	  {% if producttype_raw == 'ladies-boxers' %}
		{% assign producttype_raw = 'ladies-boxers-1' %}
	  {% endif %}
      {% capture url %}/collections/{{producttype_raw}}?view=collection-grid-items-only{% endcapture %}
      {% capture link_url %}/collections/{{producttype_raw}}{% endcapture %}
      {% capture title %}{{ "ob_product_page.other_items" | t}} <a class="text-magenta-500 font-bold  uppercase" href="{{ link_url }}">{{ producttype_name_raw }}</a> {{ "ob_product_page.design" | t}}{% endcapture %}
      {% capture subtitle %}{% endcapture %}
      <div class="tag-slider-wrap">
      <h2 id="slider-title-{% render "ob-process-international-link", url:url %}" class="hidden justify-center border-t-0 mx-6 border-color border-solid pb-1 text-center text-lg lg:text-2xl uppercase">{{ title }}</h2>
        <div id="{{ section.id }}-{{ url.handle }}-3" class="not-custom md:m-6 tag-product-recommendations" handle="{% render "ob-process-international-link", url:url %}">
          <div class="ob-slider-container w-full relative product-recommendation-ob-slider">
            <div
              class="ob-slider overflow-hidden w-full"
              data-autoplay="{{ section.settings.autoplay }}"
              data-slides-mobile="{{ section.settings.slides_mobile }}"
              data-slides-md="{{ section.settings.slides_md }}"
              data-slides-lg="{{ section.settings.slides_lg }}"
              data-gap="{{ section.settings.slide_gap }}"
              data-loop="{{ section.settings.loop }}"
              data-slide-by="{{ section.settings.slide_by }}"
              data-drag-scroll="{{ section.settings.drag_scroll }}"
              data-slider-enabled="{{ section.settings.slider_enabled }}"
              data-dots="{{ section.settings.show_dots }}"
            >
              <div class="ob-slides-wrappers gap-[{{ section.settings.slide_gap }}px] flex transition-transform duration-500 ease-in-out">
                <!-- Products will be loaded here via AJAX -->
              </div>
            </div>
            {% if section.settings.show_dots %}
              <div class="{{ section.settings.dots_container_classes }}">
                <!-- Dots will be auto-generated by JavaScript -->
              </div>
            {% endif %}
          </div>
        </div>
      </div>
	{% endif %}
  {% endunless %}
  
{% elsif type == 'subscription' %}
	{% if subscription_handle != blank %}
      {% if department_tag == 'department-mens' %}
          {% assign subscription_handle = 'mens-subscriptions' %}
      {% elsif department_tag == 'department-ladies'%}
          {% assign subscription_handle = 'womens-subscriptions' %}
      {% elsif department_tag == 'department-kids' %}
          {% assign subscription_handle =' kids-subscription' %}
      {% endif %}
      {% capture url %}/collections/{{subscription_handle}}?view=collection-grid-items-only{% endcapture %}
	  {% capture title %}Shop <a class="text-magenta-500 uppercase font-bold" href="{% render "ob-process-international-link", url:url %}">{{ department_name }} subscriptions</a>. New underwear and socks every single month{% endcapture %}
      {% capture subtitle %}Pick from our brilliantly bold adventurous designs, or play it cool with our classic range. No hidden costs, UK delivery is free, skip or cancel at anytime {% endcapture %}
      <div class="tag-slider-wrap">
        <h2 id="slider-title-{% render "ob-process-international-link", url:url %}" class="hidden justify-center border-t-0 mx-6 border-color border-solid pb-1 text-center text-lg lg:text-2xl uppercase">{{ title }}</h2>
        <div class="tag-product-recommendations m-6" id="{{ section.id }}-{{ url.handle }}-4" handle="{% render "ob-process-international-link", url:url %}">
          <div class="ob-slider-container w-full relative product-recommendation-ob-slider">
            <div
              class="ob-slider overflow-hidden w-full"
              data-autoplay="{{ section.settings.autoplay }}"
              data-slides-mobile="{{ section.settings.slides_mobile }}"
              data-slides-md="{{ section.settings.slides_md }}"
              data-slides-lg="{{ section.settings.slides_lg }}"
              data-gap="{{ section.settings.slide_gap }}"
              data-loop="{{ section.settings.loop }}"
              data-slide-by="{{ section.settings.slide_by }}"
              data-drag-scroll="{{ section.settings.drag_scroll }}"
              data-slider-enabled="{{ section.settings.slider_enabled }}"
              data-dots="{{ section.settings.show_dots }}"
            >
              <div class="ob-slides-wrappers gap-[{{ section.settings.slide_gap }}px] flex transition-transform duration-500 ease-in-out">
                <!-- Products will be loaded here via AJAX -->
              </div>
            </div>
            {% if section.settings.show_dots %}
              <div class="{{ section.settings.dots_container_classes }}">
                <!-- Dots will be auto-generated by JavaScript -->
              </div>
            {% endif %}
          </div>
        </div>
      </div>
	{% endif %}
{% elsif type == 'bundle' %}
	{% unless product.type contains 'undle' %}
	{% if producttype_tag != '' and design_tag != '' %}
      {% capture url %}/collections/all-bundles/{{design_tag}}+{{ producttype_tag }}?view=collection-grid-items-only{% endcapture %}
      {% capture title %}<a class="text-magenta-500 uppercase font-bold" href="{{ producttype_tag }}">{{ producttype_name_raw }} bundles</a> that contain this design{% endcapture %}
      {% capture subtitle %}{% endcapture %}
      <div class="tag-slider-wrap">
        <h2 id="slider-title-{% render "ob-process-international-link", url:url %}" class="hidden justify-center border-t-0 mx-6 border-color border-solid pb-1 text-center text-lg lg:text-2xl uppercase">{{ title }}</h2>
        <div class="tag-product-recommendations m-6" id="{{ section.id }}-{{ url.handle }}-5" handle="{% render "ob-process-international-link", url:url %}">
          <div class="ob-slider-container w-full relative product-recommendation-ob-slider">
            <div
              class="ob-slider overflow-hidden w-full"
              data-autoplay="{{ section.settings.autoplay }}"
              data-slides-mobile="{{ section.settings.slides_mobile }}"
              data-slides-md="{{ section.settings.slides_md }}"
              data-slides-lg="{{ section.settings.slides_lg }}"
              data-gap="{{ section.settings.slide_gap }}"
              data-loop="{{ section.settings.loop }}"
              data-slide-by="{{ section.settings.slide_by }}"
              data-drag-scroll="{{ section.settings.drag_scroll }}"
              data-slider-enabled="{{ section.settings.slider_enabled }}"
              data-dots="{{ section.settings.show_dots }}"
            >
              <div class="ob-slides-wrappers gap-[{{ section.settings.slide_gap }}px] flex transition-transform duration-500 ease-in-out">
                <!-- Products will be loaded here via AJAX -->
              </div>
            </div>
          {% render "ob-slider-pagnation-dots", 
             dots_container_classes: "relative ob-dots w-full justify-center items-center flex gap-2 z-10 my-4", 
             dot_classes: "ob-dot w-2 h-2 rounded-full bg-neutral-300 transition-colors duration-300 ease-in-out", 
             product_count: product_count,
             slides_mobile: "2",
            `slides_md: "3",
             slides_lg: "5",
             slide_by: "all" %}
          </div>
        </div>
      </div>
	{% endif %}
	{% endunless %}
{% endif %}
{% endfor %}
{%  endif %}
</div>

{% schema %}
  {
    "name": "Tag Recommendations",
    "settings": [
      {
        "type": "header",
        "content": "Slider Settings"
      },
      {
        "type": "checkbox",
        "id": "slider_enabled",
        "label": "Enable slider",
        "default": true,
        "info": "Turn the slider functionality on or off."
      },
      {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay",
        "default": false,
        "info": "Automatically cycle through slides."
      },
      {
        "type": "checkbox",
        "id": "loop",
        "label": "Loop slides",
        "default": false,
        "info": "Restart from the first slide after the last one."
      },
      {
        "type": "header",
        "content": "Slide Layout"
      },
      {
        "type": "range",
        "id": "slides_mobile",
        "label": "Slides on mobile",
        "min": 1,
        "max": 15,
        "step": 1,
        "default": 2,
        "info": "Number of slides shown on small screens."
      },
      {
        "type": "range",
        "id": "slides_md",
        "label": "Slides on tablet",
        "min": 1,
        "max": 15,
        "step": 1,
        "default": 3,
        "info": "Number of slides shown on medium screens."
      },
      {
        "type": "range",
        "id": "slides_lg",
        "label": "Slides on desktop",
        "min": 1,
        "max": 15,
        "step": 1,
        "default": 4,
        "info": "Number of slides shown on large screens."
      },
      {
        "type": "range",
        "id": "slide_gap",
        "label": "Slide gap (px)",
        "min": 0,
        "max": 60,
        "step": 1,
        "default": 10,
        "info": "Spacing between each slide."
      },
      {
        "type": "select",
        "id": "slide_by",
        "label": "Slides to move",
        "options": [
          {
            "label": "One at a time",
            "value": "1"
          },
          {
            "label": "All visible slides",
            "value": "all"
          }
        ],
        "default": "all",
        "info": "Number of slides to move when navigating"
      },
      {
        "type": "checkbox",
        "id": "drag_scroll",
        "label": "Enable drag scroll",
        "default": true,
        "info": "Allow users to drag/swipe to navigate slides"
      },
      {
        "type": "header",
        "content": "Pagination"
      },
      {
        "type": "checkbox",
        "id": "show_dots",
        "label": "Show pagination dots",
        "default": true,
        "info": "Display navigation dots below the slider."
      },
      {
        "type": "text",
        "id": "dots_container_classes",
        "label": "Dots container classes",
        "default": "relative ob-dots w-full justify-center items-center flex gap-2 z-10 my-4"
      },
      {
        "type": "text",
        "id": "dot_classes",
        "label": "Individual dot classes",
        "default": "ob-dot w-2 h-2 rounded-full bg-neutral-300 transition-colors duration-300 ease-in-out"
      }
    ],
    "presets": [
       {
         "name": "Tag Recommendations",
         "settings": {}
       }
     ]
  }
{% endschema %}
