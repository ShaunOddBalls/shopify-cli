{% schema %}
{
  "name": "Hero Image Slider",
  "settings": [
    {
      "type": "select",
      "id": "slider_height",
      "label": "Slider Height",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" }
      ],
      "default": "large"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image_desktop",
          "label": "Desktop Image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Mobile Image"
        },
        {
          "type": "image_picker",
          "id": "overlay_image_desktop",
          "label": "Desktop Overlay Image"
        },
        {
          "type": "image_picker",
          "id": "overlay_image_mobile",
          "label": "Mobile Overlay Image"
        },
        {
          "type": "select",
          "id": "overlay_position",
          "label": "Overlay Position",
          "options": [
            { "value": "center", "label": "Center" },
            { "value": "top", "label": "Above Image" }
          ],
          "default": "center"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "BEST SELLERS"
        },
        {
          "type": "text",
          "id": "button_text_1",
          "label": "Button 1 Text",
          "default": "SHOP NOW"
        },
        {
          "type": "url",
          "id": "button_link_1",
          "label": "Button 1 Link"
        },
        {
          "type": "text",
          "id": "button_text_2",
          "label": "Button 2 Text"
        },
        {
          "type": "url",
          "id": "button_link_2",
          "label": "Button 2 Link"
        },
        {
          "type": "text",
          "id": "button_text_3",
          "label": "Button 3 Text"
        },
        {
          "type": "url",
          "id": "button_link_3",
          "label": "Button 3 Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Image Slider",
      "blocks": [
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}

<div class="image-banner image-banner--size-{{ section.settings.slider_height }} relative">
  <div class="swiper-container">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        {% if block.type == 'slide' %}
          <div class="swiper-slide" {{ block.shopify_attributes }}>
            <div class="image-banner__media relative">
              <picture>
                {% if block.settings.image_desktop %}
                  <source media="(min-width: 576px)" srcset="{{ block.settings.image_desktop | img_url: 'master' }}">
                {% endif %}
                {% if block.settings.image_mobile %}
                  <img src="{{ block.settings.image_mobile | img_url: 'master' }}" alt="{{ block.settings.heading }}" class="w-full h-full object-cover">
                {% else %}
                  <img src="{{ block.settings.image_desktop | img_url: 'master' }}" alt="{{ block.settings.heading }}" class="w-full h-full object-cover">
                {% endif %}
              </picture>
              {% if block.settings.overlay_image_desktop or block.settings.overlay_image_mobile %}
                <div class="overlay-image absolute w-full {% if block.settings.overlay_position == 'center' %}h-full flex items-center justify-center{% else %}top-0 pt-4 sm:pt-8{% endif %}">
                  {% if block.settings.overlay_image_desktop %}
                    <img src="{{ block.settings.overlay_image_desktop | img_url: 'master' }}" alt="Overlay" class="hidden sm:block max-w-full max-h-full">
                  {% endif %}
                  {% if block.settings.overlay_image_mobile %}
                    <img src="{{ block.settings.overlay_image_mobile | img_url: 'master' }}" alt="Overlay" class="sm:hidden max-w-full max-h-full">
                  {% endif %}
                </div>
              {% endif %}
            </div>
            <div class="image-banner__content absolute top-0 left-0 w-full h-full flex items-center justify-center text-text-on-default">
              <div class="max-w-max flex flex-col text-center items-center justify-center">
                {% if block.settings.heading != blank %}
                  <h2 class="typography typography--heading-three mb-4"><span>{{ block.settings.heading }}</span></h2>
                {% endif %}
                <div class="button-group flex flex-col sm:flex-row gap-4">
                  {% for i in (1..3) %}
                    {% capture button_text_key %}button_text_{{ i }}{% endcapture %}
                    {% capture button_link_key %}button_link_{{ i }}{% endcapture %}
                    {% assign button_text = block.settings[button_text_key] %}
                    {% assign button_link = block.settings[button_link_key] %}
                    {% if button_text != blank and button_link != blank %}
                      <a class="button button--size-md button--variant-outline button--color-secondary" href="{{ button_link }}">{{ button_text }}</a>
                    {% endif %}
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
    <div class="swiper-pagination"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    new Swiper('.swiper-container', {
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  });
</script>