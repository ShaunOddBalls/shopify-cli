
<div class="section section-full bg-custom py-12 px-4" 
     style="background-color: {{ section.settings.section_background_color | default: '255 255 255' }};" 
     id="faq-section-{{ section.settings.category_id }}">
  <div class="section-stack section-stack--center mx-auto max-w-5xl rounded-lg">
    <div class="section-stack__main">

      {%- if section.settings.category_title != blank -%}
        <div class="text-center mb-8">
          <h2 class="text-2xl md:text-3xl font-semibold text-gray-900 mb-2">
            {{ section.settings.category_title }}
            {%- if section.settings.show_article_count -%}
              <span class="text-sm text-gray-500 font-normal ml-2">({{ section.blocks.size }})</span>
            {%- endif -%}
          </h2>
        </div>
      {%- endif -%}

      {%- if section.blocks.size > 0 -%}
        <div class="accordion-box rounded-lg bg-secondary" 
             style="background-color: {{ section.settings.content_background_color | default: '#ffffff' }};">
          {%- for block in section.blocks -%}
           {%- assign article = blogs.faqs.articles | where: "handle", block.settings.article | first -%}
            <details class="accordion group" aria-expanded="false" is="accordion-disclosure" id="faq-{{ block.settings.article.id }}" {{ block.shopify_attributes }}>
              <summary >
                <div class="accordion__toggle bold p-6 relative">
                  <span class="block pr-6 text-wrap">
                    {%- if block.settings.question_override != blank -%}
                      {{ block.settings.question_override }}
                    {%- elsif article -%}
                      {{ article.title }}
                    {%- else -%}
                      Question text needed
                    {%- endif -%}
                  </span>

                </div>
              </summary>

              <div class="accordion__content p-6" 
                   style="background-color: {{ section.settings.answer_background_color | default: '#f8f9fa' }};     border-left: 5px solid #00000073;
    margin-left: 4px;">
                <div class="prose">
                  {%- if block.settings.answer_override != blank -%}
                    {{ block.settings.answer_override }}
                  {%- elsif article -%}
                    {{ article.content }}
                  {%- else -%}
                    <p>Please select an article or add custom answer text.</p>
                  {%- endif -%}

                  {%- if article and article.tags.size > 0 -%}
                    <div class="mt-6 pt-4 border-t border-gray-200">
                      <span class="text-sm font-semibold text-gray-600 mr-2">Related topics:</span>
                      {%- for tag in article.tags -%}
                        <span class="inline-block bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs mr-2 mb-1">{{ tag }}</span>
                      {%- endfor -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            </details>
          {%- endfor -%}
        </div>
      {%- else -%}
        <div class="text-center py-16 px-8 text-gray-500">
          <h3 class="text-xl font-medium mb-4 text-gray-700">No FAQ articles configured</h3>
          <p>Please add FAQ article blocks to display your frequently asked questions.</p>
        </div>
      {%- endif -%}

    </div>
  </div>
</div>
<style>

summary {
  list-style: none;               /* remove default marker */
}
summary::-webkit-details-marker {
  display: none;                  /* for WebKit browsers */
}


summary {
  position: relative;
  /* add padding to make space for custom marker */
  padding-left: 1.5em;
}
summary::before {
  content: "►";
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  right: 50%;
  background: rgba(0, 0, 0, 0.2);
  width: 26px;
  height: 26px;
  right: 20px;
  border-radius: 100%;
  text-align: center;
  font-size: 12px;
  align-items: center;
  display: flex;
  justify-content: center;
  
}
details[open] summary::before {
  content: "▼"; /* toggled content when expanded */
}
details + details {
  border-top: 1px solid #0000000d;
  /* or border-left for horizontal lists */
}
  
</style>



{% schema %}
{
  "name": "FAQ Content",
  "class": "faq-content-section",
  "settings": [
    {
      "type": "text",
      "id": "category_id",
      "label": "Category ID",
      "info": "Unique identifier for this FAQ category (used for navigation). Use lowercase, no spaces, e.g. 'shipping' or 'returns'",
      "default": "general"
    },
    {
      "type": "text",
      "id": "category_title",
      "label": "Category Title",
      "info": "The heading displayed for this FAQ section",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "blog",
      "id": "blog_handle",
      "label": "FAQ Blog",
      "info": "Select the blog containing your FAQ articles"
    },
    {
      "type": "checkbox",
      "id": "show_article_count",
      "label": "Show article count",
      "default": true
    },
    {
      "type": "color",
      "id": "section_background_color",
      "label": "Section Background Color (RGB values)",
      "info": "Section bg color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "content_background_color", 
      "label": "Content Area Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "answer_background_color",
      "label": "FAQ Answer Background Color", 
      "default": "#f8f9fa"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Article",
      "settings": [
        {
          "type": "article",
          "id": "article",
          "label": "FAQ Article",
          "info": "Select the blog article to display. The first tag will determine the category."
        },
        {
          "type": "text",
          "id": "question_override",
          "label": "Question Override (Optional)",
          "info": "Leave blank to use the article title. Use this to override the question text."
        },
        {
          "type": "richtext",
          "id": "answer_override",
          "label": "Answer Override (Optional)",
          "info": "Leave blank to use the article content. Use this to override the answer text."
        }
      ]
    }
  ],
  "max_blocks": 50,
  "presets": [
    {
      "name": "FAQ Content",
      "category": "FAQ",
      "blocks": [
        {
          "type": "faq_item"
        },
        {
          "type": "faq_item"
        },
        {
          "type": "faq_item"
        }
      ]
    }
  ]
}
{% endschema %}