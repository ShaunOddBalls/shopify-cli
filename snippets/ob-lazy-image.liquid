{% if template.name == 'product' %}
  {% assign padding = 'p-2 lg:p-0' %}
{% endif %}
{% assign the_max_width =  2100 %}
{%  if max_width %}
  {% assign the_max_width =  max_width %}
{%  endif %}
<img max_width="{{ the_max_width }}" 
  src="{{ image | img_url: '640x' }}" alt="{{ image.alt | escape }}"
  srcset="
    {% if the_max_width >= 360 %}{%- if image.width >= 360 -%}{{ image | img_url: '360x' }} 360w{%- endif -%}{% endif %}
    {% if the_max_width >= 420 %}{%- if image.width >= 420 -%},{{ image | img_url: '420x' }} 420w{%- endif -%}{% endif %}
    {% if the_max_width >= 480 %}{%- if image.width >= 480 -%},{{ image | img_url: '480x' }} 480w{%- endif -%}{% endif %}
    {% if the_max_width >= 640 %}{%- if image.width >= 640 -%},{{ image | img_url: '640x' }} 640w{%- endif -%}{% endif %}
    {% if the_max_width >= 840 %}{%- if image.width >= 840 -%},{{ image | img_url: '840x' }} 840w{%- endif -%}{% endif %}
    {% if the_max_width >= 1080 %}{%- if image.width >= 1080 -%},{{ image | img_url: '1080x' }} 1080w{%- endif -%}{% endif %}
    {% if the_max_width >= 1280 %}{%- if image.width >= 1280 -%},{{ image | img_url: '1280x' }} 1280w{%- endif -%}{% endif %}
    {% if the_max_width >= 1540 %}{%- if image.width >= 1540 -%},{{ image | img_url: '1540x' }} 1540w{%- endif -%}{% endif %}
    {% if the_max_width >= 1860 %}{%- if image.width >= 1860 -%},{{ image | img_url: '1860x' }} 1860w{%- endif -%}{% endif %}
    {% if the_max_width >= 1950 %}{%- if image.width >= 1950 -%},{{ image | img_url: '1950x' }} 1950w{%- endif -%}{% endif %}    
    {% if the_max_width >= 2100 %}{%- if image.width >= 2100 -%},{{ image | img_url: '2100x' }} 2100w{%- endif -%}{% endif %}
  " 
  sizes="{%- if sizes -%} {{ sizes }} {%- else -%} 100vw {%- endif -%}"
  {% unless preload %} loading="lazy" {% endunless %} class="{% unless preload %}lazy{%  endunless %} {{ class }} {{ padding }} {{ extra_class }}"
  {% if id %} id="responsive-background-{{ id }}" {% endif %}
  data-ratio="{{ image.aspect_ratio }}" 
  width="{{ image.width }}" height="{{ image.height }}"
  {% if image_alignment %} style="object-position: {{ image_alignment }}" {% endif %}
/>
{%- if id -%}
  <script>
    // rbi.push(document.getElementById('responsive-background-{{ id }}'));
    // ribSetSize(document.getElementById('responsive-background-{{ id }}'));
  </script>
{%- endif -%}