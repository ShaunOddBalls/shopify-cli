{%- comment %}<locksmith:ff61>{% endcomment -%}
  {%- include 'locksmith' -%}
{%- comment %}</locksmith:ff61>{% endcomment -%}

{% comment %}
  loyalty lion script
  <script type="text/javascript" src="//www.myoddballs.com/cdn/shop/t/911/assets/loyalty-lion-button-popup.js?v=108293910989744719001749481109" defer></script>
{% endcomment %}
<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>
    {{ locksmith_initializations }}
    <meta name="google-site-verification" content="JVll2pV8ulL-26g9iFeoOisPNrKltiYxIRjglq16pwA" />
    {%render "structured-data" %}
    <style>
      .header-marker + .shopify-section{
        position:sticky;
        top:0;
        z-index:50;
      }
      /* #shopify-section-sections--16591748005949__ob-header_XhMnaV{
        position:sticky;
        top:0;
        z-index:50;
      }
         #shopify-section-sections--16591748005949__ob-header_XhMnaV{
             position:sticky;
            top:0;
            z-index:50;
          } */
    </style>
    {% assign current_url = 'https://' | append: request.host | append: request.path %}
    {% if current_url == 'https://www.myoddballs.com/collections/obble/obble' %}
      <link rel="canonical" href="https://www.myoddballs.com/obble">
    {% endif %}

    {% if request.design_mode %}
    {% else %}
      {% capture js_redirect_section %}
        {%- section 'meta-redirects' -%}
      {% endcapture %}
      {% assign script_tag = js_redirect_section
        | split: '<script>'
        | last
        | split: '</script>'
        | first
        | prepend: '<script>'
        | append: '</script>'
      %}
      {% if script_tag contains 'window.location.replace' %}
        {{ script_tag }}
      {% endif %}
    {% endif %}

    {% capture theme_ab_flag %}theme-new{% endcapture %}
    <!--
      <script
        src="https://js-de.sentry-cdn.com/48fbd7415c2ffc9bd7d328ccaa9de255.min.js"
        crossorigin="anonymous"
      ></script>
    -->
    {%- if settings.favicon -%}
      <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png">
    {%- endif -%}
    {% render 'ob-basic-structure-css' %}
    {% render 'cart-upsell-styles' %}
    <!-- Preconnect for performance -->
    <!--
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    -->
    <link rel="preconnect" href="https://static.klaviyo.com">
    <link rel="preconnect" href="https://static.rechargecdn.com">
    <link rel="preconnect" href="https://ecommplugins-scripts.trustpilot.com">
    <link rel="preconnect" href="https://cdn.getcarro.com">

    <!-- DNS prefetch -->
    <link rel="dns-prefetch" href="//static.klaviyo.com">
    <link rel="dns-prefetch" href="//static.rechargecdn.com">
    <link rel="dns-prefetch" href="//cdn.getcarro.com">
    <link rel="dns-prefetch" href="//cdn.shopify.com">
    <link rel="dns-prefetch" href="//ajax.googleapis.com">

    <script src="{{ 'sub-and-save.js' | asset_url }}" defer="defer"></script>
    {{ 'sub-and-save.css' | asset_url | stylesheet_tag }}

    <!-- Preload important fonts -->
    <!--
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    -->
    <!-- Critical CSS -->
    <!-- Include Toastify CSS -->
    <!--
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    -->
    {% if template.name == 'page' %}
      <link rel="stylesheet" href="{{ 'ob-scroll.carousel.min.css' | asset_url }}">
      <link rel="stylesheet" href="{{ 'ob-swiper.min.css' | asset_url }}">
    {% endif %}
    {% if template.name != collection %}
      <link rel="stylesheet" href="{{ 'ob-slider.css' | asset_url }}">
    {% endif %}

    <link rel="stylesheet" href="{{ 'ob-style.css' | asset_url }}">
    <link
      rel="stylesheet"
      {% if template.name == 'collection' %}
        defer="defer"
      {% endif %}
      href="{{ 'custom.css' | asset_url }}"
    >
     
      <link
        rel="stylesheet"
        href="{{ 'local.css' | asset_url }}"
      >
    <!-- css for pages -->
    {% if template.suffix == 'perfect-pair' %}
      <link rel="stylesheet" href="{{ 'ob-perfect-pair.css' | asset_url }}">
    {% endif %}
    {% if template.suffix == 'kitbuilder-page' %}
      <link rel="stylesheet" href="{{ 'ob-kitbuilder.css' | asset_url }}">
    {% endif %}
    {% if template contains 'careers' %}
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap">
      <link rel="stylesheet" href="{{ 'ob-careers.css' | asset_url }}">
    {%- endif -%}
    {% render 'ob-theme-seo-microdata-schema' %}
    {% render 'ob-theme-open-graph' %}
    <!-- tailwind add here -->

    {% assign customer_id = '' %}
    {% assign sha_customer_email = '' %}

    {% if customer %}
      {% assign customer_id = customer.id %}
      {% assign sha_customer_email = customer.email %}
    {% endif %}

    <script type="text/javascript">
      (function (a, b, c, d, e, f, g) {
        e['ire_o'] = c;
        e[c] =
          e[c] ||
          function () {
            (e[c].a = e[c].a || []).push(arguments);
          };
        f = d.createElement(b);
        g = d.getElementsByTagName(b)[0];
        f.async = 1;
        f.src = a;
        g.parentNode.insertBefore(f, g);
      })('https://utt.impactcdn.com/A5336542-fbf1-4d8a-baa6-f314a65c936c1.js', 'script', 'ire', document, window);
      ire('identify', {
        customerid: '{{ customer_id }}' /*INSERT CUSTOMER ID*/,
        customeremail: '{{ sha_customer_email }}' /*INSERT SHA1 HASHED CUSTOMER EMAIL*/,
      });
    </script>

    <script src="{{ 'ob-quick-buy.js' | asset_url }}" defer="defer"></script>

    {% if template.name == 'index' %}
      <link rel="stylesheet" href="{{ 'ob-tailwind-home.css' | asset_url }}">
    {% endif %}
    {% if template.name == 'collection' %}
      <script src="{{ 'collection-additional-banner.js' | asset_url }}" defer="defer"></script>
      <link rel="stylesheet" href="{{ 'ob-tailwind-collection.css' | asset_url }}">
    {% endif %} 
    {%if template.suffix == "subs-2025" and template.name == "product"%}
      <script src="{{ 'subscription-product.js' | asset_url }}" defer="defer"></script>
    {%endif %}
   {% if template.name == 'product' %}
      <link rel="stylesheet" href="{{ 'ob-tailwind-product.css' | asset_url }}">
    {% endif %}

    {% if template.name != 'index' and template.name != 'collection' and template.name != 'product' %}
      <!-- Specify a custom TailwindCSS configuration -->
        <script>
          tailwind.config = {
            theme: {
              extend: {
                fontSize: {
                  xxs: ['.55rem', '0.9rem'],
                },
                colors: {
                  cyan: {
                    DEFAULT: '#009FE2',
                    50: '#C8EFFF',
                    100: '#AFE7FF',
                    200: '#7CD8FF',
                    300: '#49C9FF',
                    400: '#16BAFF',
                    500: '#009FE2',
                    600: '#007BAF',
                    700: '#00577C',
                    800: '#003349',
                    900: '#000F16',
                  },
                  magenta: {
                    DEFAULT: '#F00F83',
                    50: '#FEE7F3',
                    100: '#FCCFE6',
                    200: '#F99FCD',
                    300: '#F66FB5',
                    400: '#F33F9C',
                    500: '#F00F83',
                    600: '#C00C69',
                    700: '#90094F',
                    800: '#600634',
                    900: '#30031A',
                  },
                },
              },
            },
          };
        </script>
     
    {% endif %}
    {% if template.name != 'index' and template.name != 'collection' %}
    <script src="https://cdn.tailwindcss.com"></script>
    {% elsif collection.handle == 'vodafone-campaign' %}
    <script src="https://cdn.tailwindcss.com"></script>
    {% endif %}
    {% if product and product.tags contains 'theme-darkmode' %}
    {{ 'dark-pdp.css' | asset_url | stylesheet_tag }}
    {% endif %}
    <script>
      var Shopify = Shopify || {};
      Shopify.money_format = '{{ shop.money_format }}';
    </script>

    <script>
      let translations = JSON.parse(`{{ 'js' | t: json | replace: '&quot;', '"' | replace: '=&gt;', ':' | replace: '&gt;', '>' |  replace: '&lt;', '<' | replace: '"=>"', ":" }}`)
        console.log("---------------------------------");
      console.log(translations);
      console.log("_-----------------------------------")
    </script>
    <script>
      window.Shopify = window.Shopify || {theme: {id: {{ theme.id }}, role: '{{ theme.role }}' } };
      window._template = {
          directory: "{{ template.directory }}",
          name: "{{ template.name }}",
          suffix: "{{ template.suffix }}"
      };
    </script>
    <script
      type="module"
      blocking="render"
      fetchpriority="high"
      src="https://cdn.intelligems.io/esm/f79ffe6040d4/bundle.js"
      async
    ></script>
    {% render 'ob-tracking-scripts', theme_ab_flag: theme_ab_flag %}
    <!-- -- content_for_header -- -->
    {% capture the_content_for_header %}{{ content_for_header }}{% endcapture %}
    <!-- need to keep it in the file -->
    {% unless the_content_for_header == 'Liquid error: internal' %}
      {% assign scripts_to_remove == '' %}
      {% capture scripts_to_remove %}{% endcapture %}
      {% if template.name == 'index' %}
        {% capture scripts_to_remove %}"https:\/\/cdn.getcarro.com\/script-tags\/all\/050820094100.js?shop=myoddballs.myshopify.com","https:\/\/static.rechargecdn.com\/assets\/js\/widget.min.js?shop=myoddballs.myshopify.com","https:\/\/cdn.nfcube.com\/instafeed-59b694df41d8217a7a084338bd58c9c1.js?shop=myoddballs.myshopify.com","https:\/\/app.upsellplus.com\/script\/upsellplus_cart_widget.js?shop=myoddballs.myshopify.com","https:\/\/reconvert-cdn.com\/assets\/js\/store_reconvert_node.js?v=2\u0026scid=MjlkODAxZmMxMWM2NTEwZDBiYjdlNzRkODFhOGRmZjguZDc1MDk1MWMwYmQ4ZmY0OTMwM2M5MWYyN2NiNDZkOGE=\u0026shop=myoddballs.myshopify.com","https:\/\/reconvert-cdn.com\/assets\/js\/reconvert_script_tags.mini.js?scid=MjlkODAxZmMxMWM2NTEwZDBiYjdlNzRkODFhOGRmZjguZDc1MDk1MWMwYmQ4ZmY0OTMwM2M5MWYyN2NiNDZkOGE=\u0026shop=myoddballs.myshopify.com","https:\/\/assets1.adroll.com\/shopify\/latest\/j\/shopify_rolling_bootstrap_v2.js?adroll_adv_id=D3GA63VFTNAQVG36BV5S6V\u0026adroll_pix_id=YTDFKBP4FNFH3HJXN7TO7B\u0026shop=myoddballs.myshopify.com","https:\/\/services.nofraud.com\/js\/device.js?shop=myoddballs.myshopify.com","https:\/\/quizify.arhamcommerce.com\/js\/shortcode.js?shop=myoddballs.myshopify.com","https:\/\/s3.eu-west-1.amazonaws.com\/production-klarna-il-shopify-osm\/7bec47374bc1cb6b6338dfd4d69e7bffd4f4b70b\/myoddballs.myshopify.com-1749120285564.js?shop=myoddballs.myshopify.com",{% endcapture %}
      {% endif %}
      {% if template.name == 'product' %}
        {% capture scripts_to_remove %}"https:\/\/cdn.getcarro.com\/script-tags\/all\/050820094100.js?shop=myoddballs.myshopify.com","https:\/\/static.rechargecdn.com\/assets\/js\/widget.min.js?shop=myoddballs.myshopify.com","https:\/\/cdn.nfcube.com\/instafeed-59b694df41d8217a7a084338bd58c9c1.js?shop=myoddballs.myshopify.com","https:\/\/app.upsellplus.com\/script\/upsellplus_cart_widget.js?shop=myoddballs.myshopify.com","https:\/\/reconvert-cdn.com\/assets\/js\/store_reconvert_node.js?v=2\u0026scid=MjlkODAxZmMxMWM2NTEwZDBiYjdlNzRkODFhOGRmZjguZDc1MDk1MWMwYmQ4ZmY0OTMwM2M5MWYyN2NiNDZkOGE=\u0026shop=myoddballs.myshopify.com","https:\/\/reconvert-cdn.com\/assets\/js\/reconvert_script_tags.mini.js?scid=MjlkODAxZmMxMWM2NTEwZDBiYjdlNzRkODFhOGRmZjguZDc1MDk1MWMwYmQ4ZmY0OTMwM2M5MWYyN2NiNDZkOGE=\u0026shop=myoddballs.myshopify.com","https:\/\/assets1.adroll.com\/shopify\/latest\/j\/shopify_rolling_bootstrap_v2.js?adroll_adv_id=D3GA63VFTNAQVG36BV5S6V\u0026adroll_pix_id=YTDFKBP4FNFH3HJXN7TO7B\u0026shop=myoddballs.myshopify.com","https:\/\/services.nofraud.com\/js\/device.js?shop=myoddballs.myshopify.com","https:\/\/quizify.arhamcommerce.com\/js\/shortcode.js?shop=myoddballs.myshopify.com","https:\/\/s3.eu-west-1.amazonaws.com\/production-klarna-il-shopify-osm\/7bec47374bc1cb6b6338dfd4d69e7bffd4f4b70b\/myoddballs.myshopify.com-1749120285564.js?shop=myoddballs.myshopify.com",{% endcapture %}
      {% endif %}
      {% if template.name == 'collection' %}
        {% capture scripts_to_remove %}"https:\/\/cdn.getcarro.com\/script-tags\/all\/050820094100.js?shop=myoddballs.myshopify.com","https:\/\/static.rechargecdn.com\/assets\/js\/widget.min.js?shop=myoddballs.myshopify.com","https:\/\/cdn.nfcube.com\/instafeed-59b694df41d8217a7a084338bd58c9c1.js?shop=myoddballs.myshopify.com","https:\/\/app.upsellplus.com\/script\/upsellplus_cart_widget.js?shop=myoddballs.myshopify.com","https:\/\/reconvert-cdn.com\/assets\/js\/store_reconvert_node.js?v=2\u0026scid=MjlkODAxZmMxMWM2NTEwZDBiYjdlNzRkODFhOGRmZjguZDc1MDk1MWMwYmQ4ZmY0OTMwM2M5MWYyN2NiNDZkOGE=\u0026shop=myoddballs.myshopify.com","https:\/\/reconvert-cdn.com\/assets\/js\/reconvert_script_tags.mini.js?scid=MjlkODAxZmMxMWM2NTEwZDBiYjdlNzRkODFhOGRmZjguZDc1MDk1MWMwYmQ4ZmY0OTMwM2M5MWYyN2NiNDZkOGE=\u0026shop=myoddballs.myshopify.com","https:\/\/assets1.adroll.com\/shopify\/latest\/j\/shopify_rolling_bootstrap_v2.js?adroll_adv_id=D3GA63VFTNAQVG36BV5S6V\u0026adroll_pix_id=YTDFKBP4FNFH3HJXN7TO7B\u0026shop=myoddballs.myshopify.com","https:\/\/services.nofraud.com\/js\/device.js?shop=myoddballs.myshopify.com","https:\/\/quizify.arhamcommerce.com\/js\/shortcode.js?shop=myoddballs.myshopify.com","https:\/\/s3.eu-west-1.amazonaws.com\/production-klarna-il-shopify-osm\/7bec47374bc1cb6b6338dfd4d69e7bffd4f4b70b\/myoddballs.myshopify.com-1749120285564.js?shop=myoddballs.myshopify.com",{% endcapture %}
      {% endif %}
      {% if scripts_to_remove != '' %}
        {% assign scripts_to_remove_arr = scripts_to_remove | split: ',' %}
        {% for script in scripts_to_remove_arr %}
          {% assign script = script | strip | strip_newlines %}
          {% assign the_content_for_header = the_content_for_header | replace: script, '' %}
        {% endfor %}
      {% endif %}
      {{ the_content_for_header }}
    {% endunless %}
    <!-- -- ./content_for_header -- -->

    {% if tempalte.name == 'page' %}
      <!--
        <script>
            function parseJsonData(elementId) {
                const element = document.getElementById(elementId);
                const jsonString = element ? element.getAttribute('data-json') : ''
                let data = null;

                try {
                    data = JSON.parse(jsonString);
                } catch (error) {
                    debugConsole(`Failed to parse JSON from ${elementId}:`, error)
                    data = null;
                }

                if (element) element.setAttribute('data-json', '');
                return data;
            }

            function getProductData() {
                return {
                    handle: "calypso-mens-boxer-shorts",
                    productId: 7524818518077,
                    productData : {"id":7524818518077,"title":"Calypso - Mens Boxer Shorts","handle":"calypso-mens-boxer-shorts","description":"\u003cdiv\u003e\n\u003cdiv\u003e\n\u003cspan data-olk-copy-source=\"MessageBody\"\u003eBring some SUNSHINE to your pants with \u003cstrong\u003eCalypso!\u003c\/strong\u003e\u003c\/span\u003e\u003cspan data-olk-copy-source=\"MessageBody\"\u003e🏝️☀️🍍😎\u003c\/span\u003e\u003cbr\u003e\n\u003cdiv\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cdiv class=\"row clearfix\"\u003e\n\u003cdiv class=\"span6\"\u003e\n\u003cdiv class=\"description\"\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan\u003eStretch Cotton Boxer Shorts\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eContrast Waistband\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eOverlock Stitching\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eOddBalls Branding\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eFabric Content: Body: 95% Cotton, 5% Elastane\u003c\/span\u003e\u003c\/li\u003e\n\u003cli class=\"li1\"\u003e\u003cspan class=\"s1\"\u003eCare: Wash 'em when they smell (Wash at 30\u003cmeta charset=\"utf-8\"\u003e \u003cspan\u003e °C\u003c\/span\u003e)\u003c\/span\u003e\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003c\/div\u003e\n\u003cdiv\u003eUnsure on sizing? Simply check out our \u003ca href=\"http:\/\/www.myoddballs.com\/pages\/sizing\" title=\"Size Guide\"\u003esize guide\u003c\/a\u003e to find out your perfect fit.\u003cbr\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003cdiv\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan\u003eUnderwear can’t be returned or exchanged once opened, for health and hygiene reasons.\u003c\/span\u003e\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003c\/div\u003e\n\u003cdiv\u003e\u003cbr\u003e\u003c\/div\u003e","published_at":"2025-05-30T09:45:38+01:00","created_at":"2024-11-19T12:12:20+00:00","vendor":"OddBalls","type":"Boxer Shorts","tags":["10-20","age-adult","all-underwear","bday-20","boxer-shorts","boxing-sale-10","bundle-individual","can-bundle","collection-best-sellers-homepage","collection-full-priced-products","collection-mens-boxers","collection-new-in","collection-new-in-mens","country-eu","country-uk","department-mens","design-calypso","eligible-for-discount","feature-christmas-delivery","feature-design-selector","feature-email-recommendations","feature-multi-buy","feature-referral-discount-available","label-sale-percent-discount","label-why-choose-us","material-cotton","mens-boxer-shorts-individuals","mens-boxer-shorts-patterned-individuals","pattern-patterned","perfect-pair-with-socks","Product-Type-Mens-Boxer-Shorts","recharge-one-time-product","size-2xl","size-3xl","size-l","size-large","size-m","size-medium","size-s","size-small","size-xl","size-xs","size-xxl","size-xxs","size-xxxl","sizechart-mens","style-adventurous","subdepartment-underwear","type-underwear","under-10","unidays-campaign"],"price":1200,"price_min":1200,"price_max":1200,"available":true,"price_varies":false,"compare_at_price":1200,"compare_at_price_min":1200,"compare_at_price_max":1200,"compare_at_price_varies":false,"variants":[{"id":41822426464317,"title":"XXS","option1":"XXS","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-XXS","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - XXS","public_title":"XXS","options":["XXS"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":82,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364261","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426497085,"title":"XS","option1":"XS","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-XS","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - XS","public_title":"XS","options":["XS"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":206,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364278","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426529853,"title":"Small","option1":"Small","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-S","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - Small","public_title":"Small","options":["Small"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":944,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364285","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426562621,"title":"Medium","option1":"Medium","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-M","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - Medium","public_title":"Medium","options":["Medium"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":3198,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364292","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426595389,"title":"Large","option1":"Large","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-L","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - Large","public_title":"Large","options":["Large"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":3486,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364308","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426628157,"title":"XL","option1":"XL","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-XL","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - XL","public_title":"XL","options":["XL"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":2124,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364315","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426660925,"title":"2XL","option1":"2XL","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-2XL","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - 2XL","public_title":"2XL","options":["2XL"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":859,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364322","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}},{"id":41822426693693,"title":"3XL","option1":"3XL","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-3XL","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - 3XL","public_title":"3XL","options":["3XL"],"price":1200,"weight":120,"compare_at_price":1200,"inventory_quantity":363,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364339","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}}],"images":["\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERFRONT_e69340e3-2b99-4e8c-842f-06d2f3622561.png?v=1748858244","\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERBACK_df23b476-31a1-49e4-ab0c-fac3b6b1ae21.png?v=1748858245","\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOWAISTBANDDETAIL_e56675f8-4c87-4d73-ab84-e07b1c402fe3.png?v=1748858246","\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOFABRICDETAIL_4ed57af7-6d3a-4608-af8c-229c1d877dd6.png?v=1748858244"],"featured_image":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERFRONT_e69340e3-2b99-4e8c-842f-06d2f3622561.png?v=1748858244","options":["Size"],"media":[{"alt":null,"id":26270438555709,"position":1,"preview_image":{"aspect_ratio":1.072,"height":1865,"width":2000,"src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERFRONT_e69340e3-2b99-4e8c-842f-06d2f3622561.png?v=1748858244"},"aspect_ratio":1.072,"height":1865,"media_type":"image","src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERFRONT_e69340e3-2b99-4e8c-842f-06d2f3622561.png?v=1748858244","width":2000},{"alt":null,"id":26270438522941,"position":2,"preview_image":{"aspect_ratio":1.072,"height":1865,"width":2000,"src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERBACK_df23b476-31a1-49e4-ab0c-fac3b6b1ae21.png?v=1748858245"},"aspect_ratio":1.072,"height":1865,"media_type":"image","src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOM.BOXERBACK_df23b476-31a1-49e4-ab0c-fac3b6b1ae21.png?v=1748858245","width":2000},{"alt":null,"id":26270438588477,"position":3,"preview_image":{"aspect_ratio":1.0,"height":2000,"width":2000,"src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOWAISTBANDDETAIL_e56675f8-4c87-4d73-ab84-e07b1c402fe3.png?v=1748858246"},"aspect_ratio":1.0,"height":2000,"media_type":"image","src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOWAISTBANDDETAIL_e56675f8-4c87-4d73-ab84-e07b1c402fe3.png?v=1748858246","width":2000},{"alt":null,"id":26270438490173,"position":4,"preview_image":{"aspect_ratio":1.0,"height":2000,"width":2000,"src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOFABRICDETAIL_4ed57af7-6d3a-4608-af8c-229c1d877dd6.png?v=1748858244"},"aspect_ratio":1.0,"height":2000,"media_type":"image","src":"\/\/www.myoddballs.com\/cdn\/shop\/files\/CALYPSOFABRICDETAIL_4ed57af7-6d3a-4608-af8c-229c1d877dd6.png?v=1748858244","width":2000}],"requires_selling_plan":false,"selling_plan_groups":[],"content":"\u003cdiv\u003e\n\u003cdiv\u003e\n\u003cspan data-olk-copy-source=\"MessageBody\"\u003eBring some SUNSHINE to your pants with \u003cstrong\u003eCalypso!\u003c\/strong\u003e\u003c\/span\u003e\u003cspan data-olk-copy-source=\"MessageBody\"\u003e🏝️☀️🍍😎\u003c\/span\u003e\u003cbr\u003e\n\u003cdiv\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cdiv class=\"row clearfix\"\u003e\n\u003cdiv class=\"span6\"\u003e\n\u003cdiv class=\"description\"\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cdiv\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan\u003eStretch Cotton Boxer Shorts\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eContrast Waistband\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eOverlock Stitching\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eOddBalls Branding\u003c\/span\u003e\u003c\/li\u003e\n\u003cli\u003e\u003cspan\u003eFabric Content: Body: 95% Cotton, 5% Elastane\u003c\/span\u003e\u003c\/li\u003e\n\u003cli class=\"li1\"\u003e\u003cspan class=\"s1\"\u003eCare: Wash 'em when they smell (Wash at 30\u003cmeta charset=\"utf-8\"\u003e \u003cspan\u003e °C\u003c\/span\u003e)\u003c\/span\u003e\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003c\/div\u003e\n\u003cdiv\u003eUnsure on sizing? Simply check out our \u003ca href=\"http:\/\/www.myoddballs.com\/pages\/sizing\" title=\"Size Guide\"\u003esize guide\u003c\/a\u003e to find out your perfect fit.\u003cbr\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003c\/div\u003e\n\u003cdiv\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan\u003eUnderwear can’t be returned or exchanged once opened, for health and hygiene reasons.\u003c\/span\u003e\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003c\/div\u003e\n\u003cdiv\u003e\u003cbr\u003e\u003c\/div\u003e"},
                    collections: [

                            {
                                "id": "137470672957",
                                "handle": "mens-underwear-awin",
                                "title": "(Feed) Mens Underwear",
                                "gid": "gid://shopify/Collection/137470672957"
                            },

                            {
                                "id": "286423941181",
                                "handle": "pattern-patterned",
                                "title": "-patterned",
                                "gid": "gid://shopify/Collection/286423941181"
                            },

                            {
                                "id": "59350483005",
                                "handle": "size-xxl",
                                "title": "2XL",
                                "gid": "gid://shopify/Collection/59350483005"
                            },

                            {
                                "id": "59991883837",
                                "handle": "size-2xl",
                                "title": "2XL",
                                "gid": "gid://shopify/Collection/59991883837"
                            },

                            {
                                "id": "59351466045",
                                "handle": "size-xxxl",
                                "title": "3XL",
                                "gid": "gid://shopify/Collection/59351466045"
                            },

                            {
                                "id": "266983931965",
                                "handle": "9-99-multibuy",
                                "title": "9.99 Multibuy",
                                "gid": "gid://shopify/Collection/266983931965"
                            },

                            {
                                "id": "385739972",
                                "handle": "all",
                                "title": "All",
                                "gid": "gid://shopify/Collection/385739972"
                            },

                            {
                                "id": "280671682621",
                                "handle": "all-mens-teens-boxer-shorts",
                                "title": "All Men's & Teens Boxer Shorts",
                                "gid": "gid://shopify/Collection/280671682621"
                            },

                            {
                                "id": "277038366781",
                                "handle": "all-mens-boxer-shorts",
                                "title": "All Men's Boxer Shorts",
                                "gid": "gid://shopify/Collection/277038366781"
                            },

                            {
                                "id": "384001860",
                                "handle": "not-grouped",
                                "title": "All Non-Bundles",
                                "gid": "gid://shopify/Collection/384001860"
                            },

                            {
                                "id": "266930094141",
                                "handle": "all-products-no-subs",
                                "title": "All Products-No Subs",
                                "gid": "gid://shopify/Collection/266930094141"
                            },

                            {
                                "id": "155003289661",
                                "handle": "best-sellers",
                                "title": "Best Sellers",
                                "gid": "gid://shopify/Collection/155003289661"
                            },

                            {
                                "id": "269146980413",
                                "handle": "best-sellers-homepage",
                                "title": "Best Sellers - Homepage",
                                "gid": "gid://shopify/Collection/269146980413"
                            },

                            {
                                "id": "289429356605",
                                "handle": "birthday-gifts",
                                "title": "Birthday Gifts",
                                "gid": "gid://shopify/Collection/289429356605"
                            },

                            {
                                "id": "193471172",
                                "handle": "boxer-shorts",
                                "title": "Boxer Shorts",
                                "gid": "gid://shopify/Collection/193471172"
                            },

                            {
                                "id": "289255522365",
                                "handle": "calypso",
                                "title": "Calypso",
                                "gid": "gid://shopify/Collection/289255522365"
                            },

                            {
                                "id": "283325956157",
                                "handle": "material-cotton",
                                "title": "Cotton",
                                "gid": "gid://shopify/Collection/283325956157"
                            },

                            {
                                "id": "283325595709",
                                "handle": "cotton-products",
                                "title": "Cotton Products",
                                "gid": "gid://shopify/Collection/283325595709"
                            },

                            {
                                "id": "400040708",
                                "handle": "current-offers",
                                "title": "CURRENT OFFER",
                                "gid": "gid://shopify/Collection/400040708"
                            },

                            {
                                "id": "262242500669",
                                "handle": "eligible-for-discount-code",
                                "title": "Eligible for Discount Code - USE THIS",
                                "gid": "gid://shopify/Collection/262242500669"
                            },

                            {
                                "id": "287396921405",
                                "handle": "excluding-subscriptions-gift-cards",
                                "title": "Excluding subscriptions & gift cards",
                                "gid": "gid://shopify/Collection/287396921405"
                            },

                            {
                                "id": "285205856317",
                                "handle": "full-priced-products-non-bundles",
                                "title": "Full Priced Products - Non-Bundles",
                                "gid": "gid://shopify/Collection/285205856317"
                            },

                            {
                                "id": "285325656125",
                                "handle": "best-sellers-gifting",
                                "title": "Gifting Best Sellers",
                                "gid": "gid://shopify/Collection/285325656125"
                            },

                            {
                                "id": "153641779261",
                                "handle": "gifts-under-20",
                                "title": "Gifts Under £20",
                                "gid": "gid://shopify/Collection/153641779261"
                            },

                            {
                                "id": "59341275197",
                                "handle": "size-l",
                                "title": "LARGE",
                                "gid": "gid://shopify/Collection/59341275197"
                            },

                            {
                                "id": "59993096253",
                                "handle": "size-large",
                                "title": "Large",
                                "gid": "gid://shopify/Collection/59993096253"
                            },

                            {
                                "id": "59341242429",
                                "handle": "size-m",
                                "title": "MEDIUM",
                                "gid": "gid://shopify/Collection/59341242429"
                            },

                            {
                                "id": "59993063485",
                                "handle": "size-medium",
                                "title": "Medium",
                                "gid": "gid://shopify/Collection/59993063485"
                            },

                            {
                                "id": "289226424381",
                                "handle": "bestseller-fur-herren",
                                "title": "Men's Bestsellers - EU",
                                "gid": "gid://shopify/Collection/289226424381"
                            },

                            {
                                "id": "57658820",
                                "handle": "him-individuals",
                                "title": "Men's Boxer Shorts",
                                "gid": "gid://shopify/Collection/57658820"
                            },

                            {
                                "id": "289226588221",
                                "handle": "mens-boxer-shorts",
                                "title": "Men's Boxer Shorts",
                                "gid": "gid://shopify/Collection/289226588221"
                            },

                            {
                                "id": "278855811133",
                                "handle": "mens-boxer-shorts-individuals",
                                "title": "Men's Boxer Shorts - Individuals",
                                "gid": "gid://shopify/Collection/278855811133"
                            },

                            {
                                "id": "174323695677",
                                "handle": "mens-underwear",
                                "title": "Men's Underwear",
                                "gid": "gid://shopify/Collection/174323695677"
                            },

                            {
                                "id": "175212822589",
                                "handle": "department-mens",
                                "title": "Mens",
                                "gid": "gid://shopify/Collection/175212822589"
                            },

                            {
                                "id": "268956696637",
                                "handle": "multi-buy-underwear-12",
                                "title": "Multi Buy Underwear - £12",
                                "gid": "gid://shopify/Collection/268956696637"
                            },

                            {
                                "id": "193466308",
                                "handle": "new",
                                "title": "New",
                                "gid": "gid://shopify/Collection/193466308"
                            },

                            {
                                "id": "286686675005",
                                "handle": "new-in-mens",
                                "title": "New In: Mens",
                                "gid": "gid://shopify/Collection/286686675005"
                            },

                            {
                                "id": "280252317757",
                                "handle": "myunidays",
                                "title": "OddBalls X MyUniDays",
                                "gid": "gid://shopify/Collection/280252317757"
                            },

                            {
                                "id": "175212691517",
                                "handle": "style-adventurous",
                                "title": "Patterned Underwear",
                                "gid": "gid://shopify/Collection/175212691517"
                            },

                            {
                                "id": "156534308925",
                                "handle": "product-picker-mens-boxer",
                                "title": "Product picker - Mens Boxer",
                                "gid": "gid://shopify/Collection/156534308925"
                            },

                            {
                                "id": "261449089085",
                                "handle": "recharge-one-time-products",
                                "title": "ReCharge - One Time Products",
                                "gid": "gid://shopify/Collection/261449089085"
                            },

                            {
                                "id": "288682999869",
                                "handle": "refer-a-friend-offer",
                                "title": "refer a friend offer",
                                "gid": "gid://shopify/Collection/288682999869"
                            },

                            {
                                "id": "407649604",
                                "handle": "sae-test",
                                "title": "sae test",
                                "gid": "gid://shopify/Collection/407649604"
                            },

                            {
                                "id": "137507176509",
                                "handle": "seo-test",
                                "title": "SEO test",
                                "gid": "gid://shopify/Collection/137507176509"
                            },

                            {
                                "id": "59341373501",
                                "handle": "size-s",
                                "title": "SMALL",
                                "gid": "gid://shopify/Collection/59341373501"
                            },

                            {
                                "id": "59993030717",
                                "handle": "size-small",
                                "title": "Small",
                                "gid": "gid://shopify/Collection/59993030717"
                            },

                            {
                                "id": "62581669949",
                                "handle": "underwear-weight-2",
                                "title": "Underwear weight 2",
                                "gid": "gid://shopify/Collection/62581669949"
                            },

                            {
                                "id": "59341406269",
                                "handle": "size-xl",
                                "title": "XL",
                                "gid": "gid://shopify/Collection/59341406269"
                            },

                            {
                                "id": "59341111357",
                                "handle": "size-xs",
                                "title": "XS",
                                "gid": "gid://shopify/Collection/59341111357"
                            },

                            {
                                "id": "59341209661",
                                "handle": "size-xxs",
                                "title": "XXS",
                                "gid": "gid://shopify/Collection/59341209661"
                            },

                            {
                                "id": "59341307965",
                                "handle": "size-3xl",
                                "title": "XXXL",
                                "gid": "gid://shopify/Collection/59341307965"
                            },

                            {
                                "id": "275025788989",
                                "handle": "10-20",
                                "title": "£10 to £20",
                                "gid": "gid://shopify/Collection/275025788989"
                            }

                    ],
                    selected_or_first_available_variant: {"id":41822426464317,"title":"XXS","option1":"XXS","option2":null,"option3":null,"sku":"CALYPSO-MBOXER-XXS","requires_shipping":true,"taxable":true,"featured_image":null,"available":true,"name":"Calypso - Mens Boxer Shorts - XXS","public_title":"XXS","options":["XXS"],"price":1200,"weight":90,"compare_at_price":1200,"inventory_quantity":82,"inventory_management":"shopify","inventory_policy":"deny","barcode":"5059470364261","requires_selling_plan":false,"selling_plan_allocations":[],"quantity_rule":{"min":1,"max":null,"increment":1}}
                };
            }
            function debugConsole(...messages){
                    try {
                        let isDebug = localStorage.getItem("debug");
                        if (isDebug) {
                            for (let message of messages) {
                                console.error(message);
                            }
                        }
                    } catch (err) {
                        console.error('error inside the debugError function ->', err)
                    }
            }
            function removeProductHtmlForBundles(){
                try{
                     let targetWrapper =
                                document.querySelector('main') ||
                                document.querySelector('.main') ||
                                document.querySelector('#main') ||
                                document.querySelector('#main-content');
                    if(targetWrapper){
                        targetWrapper.innerHTML = ''
                    }
                }catch(err){
                    debugConsole("error in removeProductHtmlForBundles",err)
                }
            }

            (function initializeShopifyValues() {
                const productDetails = getProductData()
                window.shopifyLiquidValuesApp4Ext = {
                    product: productDetails,
                    cartData: {"note":"","attributes":{},"original_total_price":0,"total_price":0,"total_discount":0,"total_weight":0.0,"item_count":0,"items":[],"requires_shipping":false,"currency":"GBP","items_subtotal_price":0,"cart_level_discount_applications":[],"checkout_charge_amount":0},
                    selected_or_first_available_variant: productDetails.selected_or_first_available_variant
                };

                const easyBundlesData = parseJsonData('easybundles-ext-data');
                if (easyBundlesData && !easyBundlesData?.errorMsg && !easyBundlesData.isUseAppLevelMetafieldEnabled) {
                    window.easybundles_ext_data = easyBundlesData;
                }

                const appLevelMetafields = parseJsonData('all-app-level-metafield-data') || {};
                const globalData = appLevelMetafields['full_page_ext_data'] || null

                if(globalData){
                    window.easybundle_user_ext_data = globalData?.userData || null
                }


                const bundleConfig = parseJsonData('bundle-config-data');
                if (bundleConfig) {
                    window.shopifyLiquidValuesApp4Ext.product.bundleProductConfiguration = bundleConfig;
                    const bundleConfigurationKey = bundleConfig.appLevelMetafieldKey;

                    const bundleData = appLevelMetafields[bundleConfigurationKey] || null
                    const isAutoPlaceFullPageBundleEnabled = globalData?.userData?.customSettings?.isAutoPlaceFullPageBundleEnabled ?? true

                    if(globalData && bundleData){
                        isAutoPlaceFullPageBundleEnabled && removeProductHtmlForBundles()
                        const discountsConfiguration = bundleData.discountsData
                        delete bundleData.discountsData
                        let full_page_ext_data = {
                            ...globalData,
                            stepsConfigurationData:bundleData,
                            discountsData: discountsConfiguration || {}
                        }
                        window.easybundle_full_page_ext_data = full_page_ext_data
                    }
                }
            })();
         </script>
        <script src="https://cdn.shopify.com/extensions/0df8d526-bddc-4f8c-9baa-520aa2c5cceb/eb-easy-bundle-builder-281/assets/giftBoxLogicv1.js" type="text/javascript" defer="defer"></script>
            <link href="https://cdn.shopify.com/extensions/0df8d526-bddc-4f8c-9baa-520aa2c5cceb/eb-easy-bundle-builder-281/assets/giftBoxv1.css" rel="stylesheet" type="text/css" media="all">
      -->
    {% endif %}

    {%- if localization.available_countries.size > 1 or localization.available_languages.size > 1 -%}
      {{ 'component-localization-form.css' | asset_url | stylesheet_tag: preload: true }}
      <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    <script>
      window.shopUrl = '{{ request.origin }}';
      // ... rest of existing script ...
    </script>
  </head>
  <body
    {{ template.name }}
    id="{{ page_title | handle }}"
    data-theme="{{ theme.name | handle }}"
    data-theme-ab="{{ theme_ab_flag }}"
    customer_status="{{ login_check }}"
    live
    class="
              {{ theme_ab_flag }}
      {% if customer %} customer-logged-in {% endif %}
      template-{{ template.name }} template-{{ template | replace: '.', ' ' | handle }}
      {% if settings.enable_quick_buy == false %} quick-buy-disabled {% endif %}
      {% if settings.thumb_resize == "fit" %} fit-product-grid-images {% endif %}
    "
    currency="{{ cart.currency.iso_code }}"
    currency-symbol="{{ cart.currency.symbol }}"
    current_currency="{{ current_currency }}"
    current_country="{{ current_country }}"
    market="{{ localization.market.handle }}"
    language="{{ localization.language.iso_code }}"
    country-url="{{ localization.language.root_url }}"
    country-iso="{{ localization.country.iso_code }}"
  >
    {% if request.design_mode %}
      {%- section 'meta-redirects' -%}
    {% endif %}
    {% comment %}
      <div style= "position:absolute; z-index:99999999999999999; background-color: white">
        {% assign my_product = settings.variable_values_product %}
      {% assign fg_value = "false" %}
      {% assign fg_threshold = "false" %}
      {% assign fs_threshold = "false" %}
      {% if my_product %}
        {% for variant in my_product.variants %}
          {{ variant.title }}

          {% if variant.option1 == "FreeGift_MinSpend" %}

            {% if variant.option2 == localization.country.iso_code %}
              {% assign fg_threshold = variant.price | money_without_currency %}
            {% endif %}
          {% endif %}
          {% if variant.option1 == "FreeShipping_MinSpend" %}
            {% if variant.option2 == localization.country.iso_code %}
              {% assign fs_threshold = variant.price | money_without_currency %}
            {% endif %}
          {% endif %}
          {% if variant.option1 == "FreeGift_Value" %}
            {% if variant.option2 == localization.country.iso_code %}
              {% assign fg_value = variant.price | money_without_currency %}
            {% endif %}
          {% endif %}
        {% endfor %}
      {% else %}
        <p>Product not found.</p>
      {% endif %}

      </div>
    {% endcomment %}

    <div id="top-right-toast" class="fixed toast top-2 right-2"></div>
    <div id="top-left-toast" class="fixed toast top-2 left-2"></div>
    <div id="bottom-right-toast" class="fixed toast bottom-2 right-2"></div>
    <div id="bottom-left-toast" class="fixed toast bottom-2 left-2"></div>
    {% render 'ob-fb-tracking' %}
    <div class="header-marker"></div>

    {% sections 'ob-header-group' %}

    {% if canonical_url contains '/a/refer-a-friend/' %}
      <div id="refer-a-freind-modal" class="hidden inset-0 h-full w-full bg-black bg-opacity-70 z-40">
        <div class="js-refer-modal absolute w-full h-full inset-0 z-1 fixed"></div>
        <div class="absolute transform -translate-y-1/2 -translate-x-1/2 left-1/2 top-1/2 z-2 w-11/12 max-w-lg w-full bg-white rounded-md max-h-90v border-2 border-solid border-black md:p-10 px-5 py-2">
          <div class="w-full relative">
            <div
              class="js-refer-modal -right-2 top-0 lg:-right-5 lg:-top-5 absolute border-2 bg-white border-solid border-black rounded-md btn-shadow-outline p-1 cursor-pointer"
              style="z-index: 1;"
            >
              <svg
                aria-hidden="true"
                focusable="false"
                role="presentation"
                width="17"
                height="17"
                viewBox="0 0 17 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M1.41418 0L16.9705 15.5563L15.5563 16.9706L-2.89679e-05 1.41421L1.41418 0Z" fill="#111111"></path>
                <path d="M16.9706 1.41431L1.41423 16.9707L1.85966e-05 15.5564L15.5564 9.31025e-05L16.9706 1.41431Z" fill="#111111"></path>
              </svg>
            </div>
          </div>
          <div id="refer-a-friend-widget"></div>
        </div>
      </div>

      {% section 'ob-refered-friend-hero-banner' %}
      {% section 'ob-refered-friend-reason' %}
      {% section 'ob-refer-a-friend-trust-pilot' %}
      {% section 'ob-refered-friend-faq' %}
    {% endif %}

    {% if canonical_url contains '/a/refer-a-friend/' %}
      <script type="text/javascript" src="{{ 'ob-redeem-page.js' | asset_url}}" defer></script>
    {% endif %}

    {% if template == 'index' %}
      {% sections 'ab-testing-group' %}
    {% endif %}

    {{ content_for_layout }}
    {% section 'ob-footer-links' %}
    <script>
      GEBO = {
        settings: {
          shop_money_format: '{{ shop.money_format }}',
        },
        helpers: {
          loader: `<svg class="loading-ele-outer" viewBox="25 25 50 50"><circle class="loading-ele-inner" cx="50" cy="50" r="20" fill="none" stroke-width="4"></circle></svg>`,
        },
      };
    </script>

    {% render 'ob-cart-drawer' %}
    {% assign my_product = settings.variable_values_product %}
    {% assign fg_value = 'false' %}
    {% assign fg_threshold = 'false' %}
    {% assign fs_threshold = 'false' %}
    {% assign 100_money = "false" %}
    {% assign default_country = 'Default' %}

    {% if my_product %}
      {% for variant in my_product.variants %}
        {% if variant.option1 == 'FreeGift_MinSpend' %}
          {% if variant.option2 == localization.market.handle %}
            {% assign fg_threshold = variant.price | money_without_currency %}
          {% elsif variant.option2 == default_country %}
            {% assign fg_threshold_default = variant.price | money_without_currency %}
          {% endif %}
        {% endif %}
        {% if variant.option1 == 'FreeShipping_MinSpend' %}
          {% if variant.option2 == localization.market.handle %}
            {% assign fs_threshold = variant.price | money_without_currency %}
          {% elsif variant.option2 == default_country %}
            {% assign fs_threshold_default = variant.price | money_without_currency %}
          {% endif %}
        {% endif %}
        {% if variant.option1 == 'FreeGift_Value' %}
          {% if variant.option2 == localization.market.handle %}
            {% assign fg_value = variant.price | money_without_currency %}
          {% elsif variant.option2 == default_country %}
            {% assign fg_value_default = variant.price | money_without_currency %}
          {% endif %}
        {% endif %}
        {% if variant.option1 == '100Pounds' %}
          {% if variant.option2 == localization.market.handle %}
            {% assign 100_money = variant.price | money_without_currency %}
          {% elsif variant.option2 == default_country %}
            {% assign 100_money_default = variant.price | money_without_currency %}
          {% endif %}
        {% endif %}
      {% endfor %}
    {% else %}
      <p>Product not found.</p>
    {% endif %}

    {% if fg_value == 'false' and fg_value_default %}
      {% assign fg_value = fg_value_default %}
    {% endif %}
    {% if fg_threshold == 'false' and fg_threshold_default %}
      {% assign fg_threshold = fg_threshold_default %}
    {% endif %}
    {% if fs_threshold == 'false' and fs_threshold_default %}
      {% assign fs_threshold = fs_threshold_default %}
    {% endif %}
    {% if 100_money == "false" and 100_money_default %}
      {% assign 100_money = 100_money_default %}
    {% endif %}

    {% if fg_value != 'false' %}
      <div id="free-gift-value" class="hidden {{ localization.country.iso_code }}">{{ fg_value }}</div>
    {% else %}
      <div id="free-gift-value" class="hidden {{ localization.country.iso_code }} not found">
        {{ 2000 | money_without_currency }}
      </div>
    {% endif %}
    {% if fg_threshold != 'false' %}
      <div id="free-gift-threshold" class="hidden">{{ fg_threshold }}</div>
    {% else %}
      <div id="free-gift-threshold" class="hidden">{{ 4000 | money_without_currency }}</div>
    {% endif %}
    {% if fs_threshold != 'false' %}
      <div id="free-shipping-threshold" class="hidden">{{ fs_threshold }}</div>
    {% else %}
      <div id="free-shipping-threshold" class="hidden">{{ 3500 | money_without_currency }}</div>
    {% endif %}
    {% if 100_money != "false" %}
      <input id="100-money" type="hidden" value="{{ 100_money }}">
    {% else %}
      <input
        id="100-money"
        type="hidden"
        class="whoopise doopsie |{{ localization.market.handle }}|"
        value="{{ 10000 | money_without_currency }}"
      >
    {% endif %}

    {% section 'popup-section' %}
    {% unless template.suffix == 'quick-cart' %}
            <script src="{{ 'ballQuery.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'ob-add-to-cart.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'ob-custom.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'subs-popup.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'custom.js' | asset_url }}" defer="defer"></script>
    {% endunless %}
    {% if template.suffix == "subs-2025" and template.name == "collection" %}
<script src="{{ 'subs-collection.js' | asset_url }}" defer="defer"></script>
<link rel="stylesheet" href="{{ 'ob-tailwind-collection.css' | asset_url }}">
  {%endif %} 
     {% unless template.name == 'cart' %}
      <!-- JS -->
      <!-- Include Toastify JS -->
      <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script> -->
      {% if template.name == 'page' %}
        <script src="{{ 'ob-scroll.carousel.min.js' | asset_url }}" defer="defer"></script>
        <script src="{{ 'ob-swiper.min.js' | asset_url }}" defer="defer"></script>
      {% endif %}

      <script src="{{ 'ob-slider.js' | asset_url }}" defer="defer"></script>

      <script src="{{ 'ob-accordion.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'ob-nosto-main-search.js' | asset_url }}" defer="defer"></script>
    {% endunless %}

    {% comment %}Page Scripts {% endcomment %}
    {% if template.name == 'page' or canonical_url contains '/a/refer-a-friend/' %}
      <script
        
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
        defer
      ></script>
    {% endif %}

    {% case template.suffix %}
      {% when 'sub-and-save-rebuild' %}
        <script src="{{ 'ob-sub-selector.js' | asset_url }}" defer="defer"></script>

      {% when 'gift-redeem-selector' %}
        <script src="{{ 'ob-sub-selector-redeem.js' | asset_url }}" defer="defer"></script>

      {% when 'gift-selector' %}
        <script src="{{ 'ob-sub-selector-gift.js' | asset_url }}" defer="defer"></script>

      {% when 'buy-pre-paid-subscription' %}
        <script src="{{ 'ob-gift-sub-selector.js' | asset_url }}" defer="defer"></script>

      {% when 'perfect-pair' %}
        <script src="{{ 'ob-perfect-pair-2.js' | asset_url }}" defer="defer"></script>

      {% when 'bab-page' %}
        <script defer
          src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"
        ></script>
        {% if settings['bab-sale'] == 'off' %}
          <script type="text/javascript" src="{{'ob-bab.js' | asset_url}}" defer></script>
        {% else %}
          <script type="text/javascript" src="{{ 'ob-bab2.js' | asset_url}}" defer></script>
        {% endif %}

      {% when 'ob-gift-selector' %}
        <script src="{{ 'ob-gift-selector.js' | asset_url }}" defer="defer"></script>

      {% when 'careers' %}
        <script src="{{ 'ob-careers.js' | asset_url }}" defer="defer"></script>

      {% when 'ob-discount-selector' %}
        <script src="{{ 'ob-discount-selector.js' | asset_url }}" defer="defer"></script>

      {% when 'kitbuilder-page' %}
        theme 
        <script src="{{ 'ob-kitbuilder.js' | asset_url }}" defer="defer"></script>

      {% when 'loyality-lion-redeem-2' %}
        <style>
          .lion-modal-and-screen{
            display:none;
          }
        </style>
        <script type="text/javascript" src="{{ 'referal-redeem-page.js' | asset_url }}" defer></script>

      {% when 'refer-a-friend-loyality-lion-2' %}
        <script type="text/javascript" src="{{ 'ob-referal-page.js' | asset_url }}" defer></script>

      {% when 'summer-bundle' -%}
        /script>
        <script type="text/javascript" src="{{ 'ob-easy-summer-bundle.js' | asset_url }}" defer></script>
    {% endcase %}

    
    {% assign pages_arr = 'faqs,contact-us' | split: ',' %}
    {% assign add_gorgias_chat = 'no' %}
    {% if template.name == 'index' or template.name == 'product' or template.name == 'collection' %}
      {% assign add_gorgias_chat = 'yes' %}
    {% endif %}
    {% if template.name == 'page' %}
      {% if pages_arr contains page.handle %}
        {% assign add_gorgias_chat = 'yes' %}
      {% endif %}
    {% endif %}

    {% assign market_code = localization.language.root_url %}
    {% if market_code == '/' %}
      {% assign market_code = 'uk' %}
    {% else %}
      {% assign market_code = market_code | remove: '/' %}
    {% endif %}

    {% if market_code != "en-eu" %}
      {% assign add_gorgias_chat = "no"  %}
    {% endif %}

    <!--- Gorias Sataus show variable = {{ add_gorgias_chat }} -->
    {% if add_gorgias_chat == 'yes' %}
      <style>
          body.body-popup-active #gorgias-chat-container {
          display: none !important;
        }

      </style>
    {% else %}
      <style>
        /* hidden in theme */
        #gorgias-chat-container {
          display: none !important;
        }
      </style>
    {% endif %}
    <!-- Gorgias Chat Widget Start -->
    
      <script
        id="gorgias-chat-widget-install-v2"
        src="https://config.gorgias.chat/gorgias-chat-bundle-loader.js?applicationId=29798"
        defer
      ></script>
      <script id="gorgias-chat-shopify-install">
        !(function (_) {
          (_.SHOPIFY_PERMANENT_DOMAIN = '{{shop.permanent_domain}}'),
            (_.SHOPIFY_CUSTOMER_ID = '{{customer.id}}'),
            (_.SHOPIFY_CUSTOMER_EMAIL = '{{customer.email}}');
        })(window || {});
      </script>



    <!-- Gorgias Chat Widget End -->
    <!--
      <script
        src="{{ 'instant-page-5.2.0.js' | asset_url }}"
        type="module"
        integrity="sha384-jnZyxPjiipYXnSU0ygqeac2q7CVYMbh84q0uHVRRxEtvFPiQYbXWUorga2aqZJ0z"
      ></script>
    -->

    {% capture collection_xmas_banner %}
        <div class="px-1 pb-2 gap-2 max-md:hidden {%  if settings.christmas_banner_metaobject_collection.popup_optional.value.system.handle %}js-open-generic-banner{% endif %} flex  text-xs items-center" style="color:{{ settings.christmas_banner_metaobject_collection.text_color.value }}; background-color:{{ settings.christmas_banner_metaobject.banner_color.value }}" data-metaobjecthandle="{{ settings.christmas_banner_metaobject.popup_optional.value.system.handle }}">
          {{ settings.christmas_banner_metaobject_collection.svg_icon_side_html.value }}
          {{ settings.christmas_banner_metaobject_collection.banner_header.value }}
        </div>                    
        {% endcapture %}

    {% if settings['xmas-delivery-collection'] == 'on' %}
      {% assign show_banner = false %}
      {% unless settings.christmas_banner_metaobject_collection.countrys_to_show_on.value == blank %}
        {% for value in settings.christmas_banner_metaobject_collection.countrys_to_show_on.value %}
          {% if value == cart.currency.iso_code %}
            {% assign show_banner = true %}
          {% endif %}
        {% endfor %}
      {% else %}
        {% assign show_banner = true %}
      {% endunless %}
      {% if show_banner %}
        <div id="christmas_banner_metaobject_collection">
          {{ collection_xmas_banner }}
        </div>
      {% endif %}
    {% endif %}

    {% comment %} Impact tracking {% endcomment %}

    <script>
		  document.addEventListener('DOMContentLoaded', function () {
			try {
			  let retryCount = 0;
			  const maxRetries = 7;

			  function loadClarity() {
				(function(c,l,a,r,i,t,y){
					c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
					t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
					y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
				})(window, document, "clarity", "script", "gmwkjunre5");
			  }

              function setConsentStatus(consentStatus) {
                try {
                  document.body.setAttribute("consentStatus", consentStatus);
                } catch (consentErr) {
                  console.error("❌ Error in setConsentStatus:", consentErr);
                }
              }

			  function waitForShopifyAPI() {
				if (window.Shopify && window.Shopify.customerPrivacy) {
				  console.log('[privacyapi] Shopify customer privacy API detected.');

				  var consentStatus = window.Shopify.customerPrivacy.getTrackingConsent();
				  console.log('[privacyapi] Initial consent status:', consentStatus);

				  const newConsentStatus = consentStatus === 'yes' ? 'granted' : 'denied';
				  console.log('[privacyapi] Updating Impact consent on page load:', newConsentStatus);

				  updateImpactConsent(newConsentStatus);
				  
				  // Load Clarity if consent is granted
				  if (consentStatus === 'yes') {
					loadClarity();
                    setConsentStatus(consentStatus)
				  }
				} else if (retryCount < maxRetries) {
				  retryCount++;
				  console.warn(`[privacyapi] Shopify customer privacy API not available, retrying... (${retryCount}/${maxRetries})`);
				  setTimeout(waitForShopifyAPI, 500); // Retry every 500ms
				} else {
				  console.error('[privacyapi] Max retries reached. Shopify customer privacy API not available.');
				}
			  }

			  // Start checking for API availability
			  waitForShopifyAPI();

			  // Listen for consent changes
			  document.addEventListener('visitorConsentCollected', function () {
				if (window.Shopify && window.Shopify.customerPrivacy) {
				  console.log('visitorConsentCollected event detected.');

				  const consentStatus = window.Shopify.customerPrivacy.getTrackingConsent();
				  const newConsentStatus = consentStatus === 'yes' ? 'granted' : 'denied';

				  console.log('[privacyapi] Consent changed:', newConsentStatus);
				  updateImpactConsent(newConsentStatus);
				  
				  // Load Clarity if consent is granted
				  if (consentStatus === 'yes') {
					loadClarity();
                    setConsentStatus(consentStatus)
				  }
				}
			  });

			  function updateImpactConsent(consentStatus) {
				console.log('[privacyapi] Preparing to update Impact consent with status:', consentStatus);
      
				if (typeof ire === 'function') {
				  console.log('Impact consent function found, updating...');
				  ire('consent', 'update', { tracking: consentStatus });
				  console.log('[privacyapi] Impact consent updated:', consentStatus);
				} else {
				  console.error('[privacyapi] Impact tracking function not found.');
				}
			  }
			} catch (error) {
			  console.log('[privacyapi] Impact: ', error);
			}
		  });
    </script>

    {% comment %}
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          try {
            let retryCount = 0;
            const maxRetries = 7;

            function waitForShopifyAPI() {
              if (window.Shopify && window.Shopify.customerPrivacy) {
                console.log('Shopify customer privacy API detected.');

                var consentStatus = window.Shopify.customerPrivacy.getTrackingConsent();
                console.log('Initial consent status:', consentStatus);

                const newConsentStatus = consentStatus === 'yes' ? 'granted' : 'denied';
                console.log('Updating Impact consent on page load:', newConsentStatus);

                updateImpactConsent(newConsentStatus);
              } else if (retryCount < maxRetries) {
                retryCount++;
                console.warn(`Shopify customer privacy API not available, retrying... (${retryCount}/${maxRetries})`);
                setTimeout(waitForShopifyAPI, 500); // Retry every 500ms
              } else {
                console.error('Max retries reached. Shopify customer privacy API not available.');
              }
            }

            // Start checking for API availability
            waitForShopifyAPI();

            // Listen for consent changes
            document.addEventListener('visitorConsentCollected', function () {
              if (window.Shopify && window.Shopify.customerPrivacy) {
                console.log('visitorConsentCollected event detected.');

                const consentStatus = window.Shopify.customerPrivacy.getTrackingConsent();
                const newConsentStatus = consentStatus === 'yes' ? 'granted' : 'denied';

                console.log('Consent changed:', newConsentStatus);
                updateImpactConsent(newConsentStatus);
              }
            });

            function updateImpactConsent(consentStatus) {
              console.log('Preparing to update Impact consent with status:', consentStatus);

              if (typeof ire === 'function') {
                console.log('Impact consent function found, updating...');
                ire('consent', 'update', { tracking: consentStatus });
                console.log('Impact consent updated:', consentStatus);
              } else {
                console.error('Impact tracking function not found.');
              }
            }
          } catch (error) {
            console.log('Impact: ', error);
          }
        });
      </script>
    {% endcomment %}
    {% if settings['ll-popup'] and template.name != 'collection' %}
      <script type="text/javascript" src="{{ 'loyalty-lion-button-popup.js' | asset_url }}" defer></script>
    {% endif %}
  </body>
</html>
